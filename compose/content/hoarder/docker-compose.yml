---
services:
  web:
    image: ghcr.io/hoarder-app/hoarder:0.27.1@sha256:abd7d6b11b1b8fa3593d1971f886a74850ba8d6a99291218b150207d5a60378e
    container_name: hoarder
    hostname: hoarder
    env_file:
      - hoarder.env
    volumes:
      - /docker/data/hoarder-app/data:/data
      - assets:/assets
    labels:
      - "de.panzer1119.docker.volume.default.cifs.host=op://Docker/Hoarder/CIFS/Host"
      - "de.panzer1119.docker.volume.default.cifs.username=op://Docker/Hoarder/CIFS/Username"
      - "de.panzer1119.docker.volume.default.cifs.password=op://Docker/Hoarder/CIFS/Password"
      - "de.panzer1119.docker.volume.hoarder_assets.cifs.share=op://Docker/Hoarder/CIFS/Share_Hoarder_Assets"
    ports:
      - "3038:3000"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  chrome:
    image: gcr.io/zenika-hub/alpine-chrome:124@sha256:1a0046448e0bb6c275c88f86e01faf0de62b02ec8572901256ada0a8c08be23f
    command:
      - --no-sandbox
      - --disable-gpu
      - --disable-dev-shm-usage
      - --remote-debugging-address=0.0.0.0
      - --remote-debugging-port=9222
      - --hide-scrollbars
    dns:
      - 192.168.6.4
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  meilisearch:
    image: getmeili/meilisearch:v1.24@sha256:d991eb07331e9d1f9cec7bc0f9523fd5d51aee3b223d997e0e66206361952056
    env_file:
      - meilisearch.env
    volumes:
      - /docker/data/hoarder-app/mailisearch:/meili_data
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

volumes:
  assets:
    name: hoarder_assets
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
