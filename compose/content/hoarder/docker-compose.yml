---
services:
  web:
    image: ghcr.io/hoarder-app/hoarder:0.23.2@sha256:04956fc529d4675cfa849313f270ae863094d1f2be4c922172f06a62ef9bd4ac
    container_name: hoarder
    hostname: hoarder
    env_file:
      - hoarder.env
    volumes:
      - /docker/data/hoarder-app/data:/data
      - assets:/assets
    labels:
      - "de.panzer1119.docker.volume.default.cifs.host=op://Docker/Hoarder/CIFS/Host"
      - "de.panzer1119.docker.volume.default.cifs.username=op://Docker/Hoarder/CIFS/Username"
      - "de.panzer1119.docker.volume.default.cifs.password=op://Docker/Hoarder/CIFS/Password"
      - "de.panzer1119.docker.volume.hoarder_assets.cifs.share=op://Docker/Hoarder/CIFS/Share_Hoarder_Assets"
    ports:
      - "3038:3000"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  chrome:
    image: gcr.io/zenika-hub/alpine-chrome:123@sha256:e38563d4475a3d791e986500a2e4125c9afd13798067138881cf770b1f6f3980
    command:
      - --no-sandbox
      - --disable-gpu
      - --disable-dev-shm-usage
      - --remote-debugging-address=0.0.0.0
      - --remote-debugging-port=9222
      - --hide-scrollbars
    dns:
      - 192.168.6.4
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  meilisearch:
    image: getmeili/meilisearch:v1.11@sha256:6f8f1fc29d1ff67b4d8d503bb4e0a69b55c8d42600decafde951344218193a27
    env_file:
      - meilisearch.env
    volumes:
      - /docker/data/hoarder-app/mailisearch:/meili_data
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

volumes:
  assets:
    name: hoarder_assets
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
