---
volumes:
  config:
    name: config/sonarr
    driver: zfs
  config-4k:
    name: config/sonarr-4k
    driver: zfs
  config-anime:
    name: config/sonarr-anime
    driver: zfs
  tv:
    name: sonarr-tv
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
  tv-4k:
    name: sonarr-tv-4k
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
  tv-anime:
    name: sonarr-tv-anime
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
  trash:
    name: sonarr-trash
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
  trash-4k:
    name: sonarr-trash-4k
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true
  trash-anime:
    name: sonarr-trash-anime
    # Because this is a cifs volume, and it needs credentials, it is created outside of this file
    external: true

x-environment: &default-environment
  - PGID=1000
  - PUID=1000
  - TZ=Europe/Berlin
  - UMASK_SET=022

x-volumes:
  - &volume-data /data:/data
  - &volume-downloads /data/empty:/downloads
  - &volume-trash /data/empty:/trash
  - &volume-tv /data/empty:/tv

services:
  sonarr:
    image: ghcr.io/linuxserver/sonarr:4.0.8@sha256:fbee5770f688e4f89dd073534feda11251bfde0e0a4e6ac74dd8c33bb856b505
    container_name: sonarr
    hostname: sonarr
    environment: *default-environment
    volumes:
      - config:/config
      - tv:/data/media/sonarr
      - trash:/data/trash/sonarr
    labels:
      - "de.panzer1119.docker.volume.sonarr-tv.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-tv.cifs.share=op://Docker/Sonarr/CIFS/Share_TV"
      - "de.panzer1119.docker.volume.sonarr-tv.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-tv.cifs.password=op://Docker/Sonarr/CIFS/Password"
      - "de.panzer1119.docker.volume.sonarr-trash.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-trash.cifs.share=op://Docker/Sonarr/CIFS/Share_Trash"
      - "de.panzer1119.docker.volume.sonarr-trash.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-trash.cifs.password=op://Docker/Sonarr/CIFS/Password"
    network_mode: bridge
    ports:
      - "8989:8989"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  sonarr-4k:
    image: ghcr.io/linuxserver/sonarr:4.0.8@sha256:fbee5770f688e4f89dd073534feda11251bfde0e0a4e6ac74dd8c33bb856b505
    container_name: sonarr-4k
    hostname: sonarr-4k
    environment: *default-environment
    volumes:
      - config-4k:/config
      - tv-4k:/data/media/sonarr-4k
      - trash-4k:/data/trash/sonarr-4k
    labels:
      - "de.panzer1119.docker.volume.sonarr-tv-4k.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-tv-4k.cifs.share=op://Docker/Sonarr/CIFS/Share_TV_4K"
      - "de.panzer1119.docker.volume.sonarr-tv-4k.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-tv-4k.cifs.password=op://Docker/Sonarr/CIFS/Password"
      - "de.panzer1119.docker.volume.sonarr-trash-4k.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-trash-4k.cifs.share=op://Docker/Sonarr/CIFS/Share_Trash_4K"
      - "de.panzer1119.docker.volume.sonarr-trash-4k.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-trash-4k.cifs.password=op://Docker/Sonarr/CIFS/Password"
    network_mode: bridge
    ports:
      - "4949:8989"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  sonarr-anime:
    image: ghcr.io/linuxserver/sonarr:4.0.8@sha256:fbee5770f688e4f89dd073534feda11251bfde0e0a4e6ac74dd8c33bb856b505
    container_name: sonarr-anime
    hostname: sonarr-anime
    environment: *default-environment
    volumes:
      - config-anime:/config
      - tv-anime:/data/media/sonarr-anime
      - trash-anime:/data/trash/sonarr-anime
    labels:
      - "de.panzer1119.docker.volume.sonarr-tv-anime.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-tv-anime.cifs.share=op://Docker/Sonarr/CIFS/Share_TV_Anime"
      - "de.panzer1119.docker.volume.sonarr-tv-anime.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-tv-anime.cifs.password=op://Docker/Sonarr/CIFS/Password"
      - "de.panzer1119.docker.volume.sonarr-trash-anime.cifs.host=op://Docker/Sonarr/CIFS/Host"
      - "de.panzer1119.docker.volume.sonarr-trash-anime.cifs.share=op://Docker/Sonarr/CIFS/Share_Trash_Anime"
      - "de.panzer1119.docker.volume.sonarr-trash-anime.cifs.username=op://Docker/Sonarr/CIFS/Username"
      - "de.panzer1119.docker.volume.sonarr-trash-anime.cifs.password=op://Docker/Sonarr/CIFS/Password"
    network_mode: bridge
    ports:
      - "1919:8989"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf
