---
volumes:
  #  monitoring:
  #    name: data/check-mk-raw
  #    driver: zfs
  ##    driver_opts:
  ##      - checksum=sha512
  ##      - dedup=verify
  monitoring:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: "/docker/data/check-mk-raw"

services:
  check-mk-raw:
    image: checkmk/check-mk-raw:2.4.0-latest@sha256:8ba852482579115c7727d787b73670dc6810ea4fbe60aa730a16a58b5aa931a2
    container_name: check-mk-raw
    hostname: check-mk-raw
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "monitoring:/omd/sites"
    tmpfs:
      - "/opt/omd/sites/cmk/tmp:uid=1000,gid=1000"
    ports:
      - "8000:8000"
      - "8080:5000"
    network_mode: bridge
    restart: always
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf
