---
volumes:
  monitoring:
    name: data/check-mk-raw
    driver: zfs
#    driver_opts:
#      - checksum=sha512
#      - dedup=verify

services:
  check-mk-raw:
    image: checkmk/check-mk-raw:2.3.0-latest@sha256:84d8df9926777d86a4a1935f06ea0b8e1d2bb9f3aa779375f1f24af7ee55f078
    container_name: check-mk-raw
    hostname: check-mk-raw
    volumes:
      - "/etc/localtime:/etc/localtime:ro"
      - "monitoring:/omd/sites"
    tmpfs:
      - "/opt/omd/sites/cmk/tmp:uid=1000,gid=1000"
    ports:
      - "8000:8000"
      - "8080:5000"
    network_mode: bridge
    restart: always
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf
