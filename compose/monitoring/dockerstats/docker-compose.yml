---
services:
  dockerstats:
    image: drakonis96/dockerstats:v0.7.0@sha256:a9becfcb0b89b20aec3e7b99cbfb0ec0e613f83ccf0f412dd07372590b46a0af
    container_name: docker-stats
    hostname: docker-stats
    env_file: dockerstats.env
    # For hosts with an NVIDIA GPU and the NVIDIA Container Toolkit, you can uncomment the deploy/resources/devices section.
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - capabilities: [gpu]
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./users.db:/app/users.db
    ports:
      - "5431:5000"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf

  cadvisor:
    image: ghcr.io/google/cadvisor:0.54.1@sha256:80e55785e1fa6bcf2b2f372eec4859608f1fe9646bb087f05c7916118b541552
    container_name: cadvisor
    privileged: true
    command:
      - --docker_only=true
      - --housekeeping_interval=10s
    volumes:
      - /:/rootfs:ro
      - /sys:/sys:ro
      - /var/run:/var/run:ro
      - /var/lib/docker/:/var/lib/docker:ro
    expose:
      - "8080"
    #ports:
    #  - "8080:8080" # You can change the external port if you wish
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf
...
