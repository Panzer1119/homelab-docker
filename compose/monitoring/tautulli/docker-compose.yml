---
volumes:
  backup:
    name: backup/tautulli
    driver: zfs
    driver_opts:
      - checksum=sha512
      - dedup=verify
  cache:
    name: cache/tautulli
    driver: zfs
  config:
    name: config/tautulli
    driver: zfs

services:
  tautulli:
    image: ghcr.io/linuxserver/tautulli:version-v2.14.4@sha256:75bc14dabe6fce2b94b10764b2f7e95feaf21f6e7ea90ca547af29475edba334
    container_name: tautulli
    hostname: tautulli
    environment:
      - PGID=1000
      - PUID=1000
      - TZ=Europe/Berlin
    volumes:
      - backup:/config/backups
      - cache:/cache
      - config:/config
      #TODO Somehow get the logs from the plex container?
      #- /docker/data/tautulli/plex_logs:/logs:ro
      #- /docker/data/tautulli/plex_logs:/plex_logs:ro
    network_mode: bridge
    ports:
      - "8181:8181"
    restart: unless-stopped
    extends:
      file: ../../common/docker-compose.yml
      service: logging-gelf
